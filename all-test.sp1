#Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾ØªØŒ Ø³Ø±ÙˆØ± Ù„Ø§Ø±Ø§ÙˆÙ„ Ø¨Ø§ÛŒØ¯ Ø¨Ø§ php artisan serve --port=8000 Ø§Ø¬Ø±Ø§ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯.

# Ù…Ø³ÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡
$projectPath = "C:\Users\dear-user\Desktop\avs-clean"

# Ù‡Ù…Ù‡ API Ù‡Ø§
$apis = @{
    "equipment-types" = "$projectPath/api/equipment-types"
    "posts" = "$projectPath/api/posts"
    "checklist-template/1" = "$projectPath/api/checklist-template/1"
    "activity-price-list" = "$projectPath/api/activity-price-list"
    "consumables" = "$projectPath/api/consumables"
    "brands" = "$projectPath/api/brands"
}

# Ø³Ø±ÙˆØ± Ù„Ø§Ø±Ø§ÙˆÙ„ Ø­ØªÙ…Ø§ Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ù¾ÙˆØ±Øª 8000 Ø§Ø¬Ø±Ø§ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ù‡
$baseUrl = "http://127.0.0.1:8000/api"

# ØªØ³Øª Ù‡Ø± API
foreach ($key in $apis.Keys) {
    $url = "$baseUrl/$key"
    Write-Host "`nğŸŒ Testing API: $url" -ForegroundColor Cyan
    try {
        $response = Invoke-RestMethod -Uri $url -Method Get -ErrorAction Stop
        if ($response -is [System.Collections.IEnumerable]) {
            $count = $response.Count
        } elseif ($response.data -is [System.Collections.IEnumerable]) {
            $count = $response.data.Count
        } else {
            $count = 1
        }
        Write-Host "âœ… API responded successfully. Items count: $count" -ForegroundColor Green
    } catch {
        Write-Host "âŒ API failed or returned 404" -ForegroundColor Red
        Write-Host "Error details: $_"
    }
}
